/**
 * Mcx Dialog v0.1.3
 * Copyright (C) 2018 mcx
 * https://github.com/code-mcx/mcx-dialog
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./css/mcx-dialog.css")):"function"==typeof define&&define.amd?define(["./css/mcx-dialog.css"],t):(e=e||self).mcxDialog=t()}(this,function(){"use strict";var o=!!document.addEventListener;function h(e,t,n){o?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function g(e,t,n){o?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function v(e,t){var n=e.className.split(" ");""===e.className&&(n=[]),n.push(t),e.className=n.join(" ")}function c(e,t){for(var n in t)e[n]=t[n];return e}var E={init:function(o,n,e){var t=document.getElementsByTagName("body")[0],i=document.createElement("div");(e&&(v(i,"mcx-dialog-bg"),t.appendChild(i),n.shadeClose&&h(i,"click",function(){d()})),n.showClose)&&h(o.getElementsByTagName("i")[0],"click",function(){d()});var l=!1;function a(){E.close([o]),g(o,"animationend",a)}function d(){l?(v(o,"animation-"+n.animationType+"-out"),h(o,"animationend",a),E.close([i])):E.close([i,o]),n.layer&&(b.layerElement=[])}void 0!==o.style.animation&&(l=!0);var s=o.getElementsByTagName("div")[0],c=void 0,r=void 0,m=void 0,u=void 0;function f(e){var t=(e.pageX||e.clientX)-c,n=(e.pageY||e.clientY)-r;o.style.left=m+t+"px",o.style.top=u+n+"px"}if(h(s,"mousedown",function(e){c=e.pageX||e.clientX,r=e.pageY||e.clientY,m=parseFloat(o.style.left),u=parseFloat(o.style.top),h(document,"mousemove",f)}),h(s,"mouseup",function(){g(document,"mousemove",f)}),0<n.buttons.length)for(var p=0;p<n.buttons.length;p++){var y=n.buttons[p];y.setAttribute("index",p),h(y,"click",function(e){d();var t=e.target||e.srcElement;n.btnClick&&n.btnClick(parseInt(t.getAttribute("index")))})}t.appendChild(o),o.style.top=(document.documentElement.clientHeight-o.offsetHeight)/2+"px",o.style.left=(document.documentElement.clientWidth-o.offsetWidth)/2+"px",n.layer&&(b.layerElement.push(i),b.layerElement.push(o),n.afterLoad())},initHint:function(e,t){if(document.getElementsByTagName("body")[0].appendChild(e),void 0===t.target)e.style.top=(document.documentElement.clientHeight-e.offsetHeight)/2+"px",e.style.left=(document.documentElement.clientWidth-e.offsetWidth)/2+"px";else{var n=document.getElementById(t.target),o=function(e){for(var t=e.offsetTop;null!==e.offsetParent;)t+=e.offsetParent.offsetTop,e=e.offsetParent;return t}(n),i=function(e){for(var t=e.offsetLeft;null!==e.offsetParent;)t+=e.offsetParent.offsetLeft,e=e.offsetParent;return t}(n);"right"===t.direction?(i+=n.offsetWidth,e.style.top=o+"px",e.style.left=i+10+"px"):"left"===t.direction?(i-=e.offsetWidth,e.style.top=o+"px",e.style.left=i-10+"px"):"top"===t.direction?(o-=e.offsetHeight,e.style.top=o-10+"px",e.style.left=i+"px"):"bottom"===t.direction&&(o+=n.offsetHeight,e.style.top=o+10+"px",e.style.left=i+"px")}var l=!1;function a(){E.close([e]),g(e,"animationend",a)}void 0!==e.style.animation&&(l=!0),setTimeout(function(){l?(v(e,"animation-"+t.animationType+"-out"),h(e,"animationend",a)):E.close([e])},1e3*t.time)},close:function(e){for(var t=document.getElementsByTagName("body")[0],n=0;n<e.length;n++)t.removeChild(e[n])}},b={loadElement:[],layerElement:[],alert:function(e,t){var n={showClose:!0,shadeClose:!1,animationType:"bounce",titleStyle:{},buttonStyle:{}};(n=c(n,t)).btn=["确定"],n.btnClick=void 0,n.buttonStyle&&(n.buttonStyle=[n.buttonStyle]),this.open(e,n)},confirm:function(e,t){var n={color:"#000000",border:"1px solid #DEDEDE",backgroundColor:"#F1F1F1"},o={btn:["确定","取消"],showClose:!0,shadeClose:!1,animationType:"bounce",titleStyle:{},buttonStyle:[{},n]};1===(o=c(o,t)).buttonStyle.length&&(o.buttonStyle=[t.buttonStyle[0],n]),this.open(e,o)},layer:function(e){var t={width:500,height:400,showClose:!0,shadeClose:!1,animationType:"bounce",titleStyle:{},style:1,content:"",afterLoad:function(){}};(t=c(t,e)).btn=[],t.showClose=!0,t.layer=!0,this.open(t.content,t)},open:function(e,t){var n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div");if(l.innerHTML=t.title||"信息",i.innerHTML=e,v(n,"mcx-dialog"),v(n,"animation-"+t.animationType+"-in"),v(o,"dialog-head"),v(i,"dialog-content"),v(l,"dialog-title"),o.appendChild(l),n.appendChild(o),n.appendChild(i),t.width&&(n.style.width=t.width+"px"),t.height&&(t.layer?(i.style.height=t.height-41+"px",v(i,"dialog-layer-content")):i.style.height=t.height-41-36-50+"px"),t.titleStyle)for(var a in t.titleStyle)o.style[a]=t.titleStyle[a];if(t.showClose){var d=document.createElement("i");v(d,"dialog-ico"),o.appendChild(d)}var s=document.createElement("div");t.layer?(1===t.style&&(v(n,"dialog-layer"),o.style.borderRadius="0"),i.style.overflow="auto"):(v(s,"dialog-foot"),n.appendChild(s)),t.buttons=[];for(var c=0;c<t.btn.length;c++){var r=document.createElement("a");if(r.href="javascript:void(0);",r.innerHTML=t.btn[c],v(r,"dialog-foot-btn"),t.buttonStyle&&0<t.buttonStyle.length){var m=t.buttonStyle[c];for(var u in m)r.style[u]=m[u]}s.appendChild(r),t.buttons.push(r)}E.init(n,t,!0)},msg:function(e,t){var n={time:3,style:{},animationType:"zoom"};n=c(n,t);var o=document.createElement("div");for(var i in v(o,"mcx-dialog-msg"),v(o,"animation-"+n.animationType+"-in"),o.innerHTML=e,n.style)o.style[i]=n.style[i];E.initHint(o,n)},tips:function(e,t,n){var o={time:3,direction:"right",animationType:"zoom",style:{}};(o=c(o,n)).target=t||"";var i=document.createElement("div"),l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div");for(var s in v(i,"mcx-dialog-tips"),v(i,"animation-"+o.animationType+"-in"),v(l,"tips-wrapper"),v(a,"tips-arrow-"+{left:"right",right:"left",top:"bottom",bottom:"top"}[o.direction]),d.innerHTML=e,i.appendChild(l),l.appendChild(a),l.appendChild(d),o.style)i.style[s]=o.style[s],"backgroundColor"===s&&("left"===o.direction||"right"===o.direction?a.style.borderBottomColor=o.style[s]:a.style.borderRightColor=o.style[s]);E.initHint(i,o)},loading:function(e){var t={src:"img",hint:"",type:1,animationType:"zoom"};t=c(t,e);var n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("img"),l=document.createElement("div");v(n,"mcx-dialog-loading-bg"),v(o,"mcx-dialog-loading"),v(o,"animation-"+t.animationType+"-in"),t.hint&&(v(o,"mcx-dialog-loading-hint"),l.innerHTML=t.hint),i.src=t.src+"/loading-"+t.type+".gif",o.appendChild(i),o.appendChild(l);var a=document.getElementsByTagName("body")[0];a.appendChild(n),a.appendChild(o),o.style.top=(document.documentElement.clientHeight-o.offsetHeight)/2+"px",o.style.left=(document.documentElement.clientWidth-o.offsetWidth)/2+"px",this.loadElement.push(n),this.loadElement.push(o)},closeLoading:function(){E.close(this.loadElement),this.loadElement=[]},closeLayer:function(){E.close(this.layerElement),this.layerElement=[]},install:function(e,t){e.prototype.$mcxDialog=b}};return b});
